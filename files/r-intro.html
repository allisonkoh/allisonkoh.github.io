<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Allison Koh">
<meta name="dcterms.date" content="2023-02-01">

<title>A Gentle Introduction to R and RStudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="r-intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="r-intro_files/libs/quarto-html/quarto.js"></script>
<script src="r-intro_files/libs/quarto-html/popper.min.js"></script>
<script src="r-intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="r-intro_files/libs/quarto-html/anchor.min.js"></script>
<link href="r-intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="r-intro_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="r-intro_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="r-intro_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="r-intro_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A Gentle Introduction to <code>R</code> and RStudio</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <a href="https://allisonkoh.github.io/">Allison Koh</a> <a href="https://orcid.org/0000-0002-3639-2785" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Hertie School
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 1, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="plan-for-this-session" class="level1">
<h1>Plan for this session</h1>
<p><code>R</code> is a programming language for statistical computing and data visualization that serves as an open source alternative to commercial statistical packages such as Stata or SPSS. This workshop will give you a basic overview of R functions, data wrangling, and using RStudio. We will also cover how to troubleshoot the inevitable difficulties that come with coding in any programming language.</p>
<p>Our 4-hour session will be split into two parts:</p>
<ul>
<li><code>R</code> Basics (arithmetic, logical operators, objects, installing packages, working with data frames, basic data visualization)</li>
<li>Data management with <code>tidyverse</code> packages: <code>dplyr</code>, <code>tidyr</code></li>
</ul>
</section>
<section id="getting-started-with-r" class="level1">
<h1>Getting started with <code>R</code></h1>
<section id="getting-help" class="level2">
<h2 class="anchored" data-anchor-id="getting-help">Getting help</h2>
<p>The key to learning <code>R</code> is: <strong>Google</strong>! This workshop will give you an overview over basic <code>R</code> functions, but to really learn <code>R</code> you will have to actively use it yourself, trouble shoot, ask questions, and Google! The <code>R</code> mailing list and other help pages such as http://stackoverflow.com offer a rich archive of questions and answers by the <code>R</code> community. For example, if you google “recode data in r” you will find a variety of useful websites explaining how to do this on the first page of the search results. Also, don’t be surprised if you find a variety of different ways to execute the same task.</p>
<p>RStudio also has a useful help menu. In addition, you can get information on any function or integrated data set in <code>R</code> through the console, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>?plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>starting httpd help server ... done</code></pre>
</div>
</div>
<p>In addition, there are a lot of free <code>R</code> resources. Some of my favorites include:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/">R for Data Science (R4DS)</a> by Hadley Wickham and Garrett Grolemund</li>
<li><a href="https://www.rstudio.com/resources/cheatsheets/">RStudio Cheat Sheets</a></li>
<li><a href="https://www.tidytuesday.com/">TidyTuesday Community</a></li>
<li>YouTube: <a href="https://www.youtube.com/channel/UCfNGzUFfsy_3udMY8UyaqBA">Danielle Navarro</a>, <a href="https://www.youtube.com/c/JuliaSilge/videos">Julia Silge</a></li>
<li>Twitter: <a href="https://twitter.com/search?q=%23rstats&amp;src=typed_query">#rstats</a>, <a href="https://twitter.com/search?q=%23TidyTuesday&amp;src=typed_query&amp;f=top">#TidyTuesday</a></li>
<li>Mastodon: <a href="https://fosstodon.org/home">Fosstodon</a> and <a href="https://vis.social/explore">vis.social</a></li>
</ul>
</section>
<section id="lets-execute-our-first-line-of-code" class="level2">
<h2 class="anchored" data-anchor-id="lets-execute-our-first-line-of-code">Let’s execute our first line of code!</h2>
<p>To execute a single line of code. In RStudio, with the cursor in the line you want <code>R</code> to execute,</p>
<ol type="1">
<li>click the “Run” button at the top of the editor pane, OR</li>
<li>press <code>Cmd + Return</code> (on macOS) or <code>Ctrl + Enter</code> (on Windows).</li>
</ol>
<p>To execute multiple lines of code at once, highlight the respective portion of the code, then run it using one of the operations above.</p>
<p>To execute an entire <code>R</code> script,</p>
<ol type="1">
<li>click the “Source” button at the top right of the editor pane, OR</li>
<li>press <code>Cmd + Shift + S</code> (on macOS) or <code>Ctrl + Shift + S</code> (on Windows)</li>
</ol>
<p><strong>Let’s practice</strong> this by running the <code>00_packages.R</code> script that we will need for coding exercises in this workshop!</p>
</section>
</section>
<section id="arithmetic-in-r" class="level1">
<h1>Arithmetic in <code>R</code></h1>
<p>You can use <code>R</code> as a calculator!</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Operator</th>
<th style="text-align: left;">Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Addition</td>
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;"><code>2+4</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Subtraction</td>
<td style="text-align: left;"><code>-</code></td>
<td style="text-align: left;"><code>2-4</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Multiplication</td>
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;"><code>2*4</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Division</td>
<td style="text-align: left;"><code>/</code></td>
<td style="text-align: left;"><code>4/2</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Exponentiation</td>
<td style="text-align: left;"><code>^</code></td>
<td style="text-align: left;"><code>2^4</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Square Root</td>
<td style="text-align: left;"><code>sqrt()</code></td>
<td style="text-align: left;"><code>sqrt(144)</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Absolute Value</td>
<td style="text-align: left;"><code>abs()</code></td>
<td style="text-align: left;"><code>abs(-4)</code></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span><span class="sc">*</span><span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">144</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
</div>
<p>Just like any regular calculator, you have to pay attention to the order of operations. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">*</span> <span class="dv">8</span> <span class="sc">-</span> <span class="fu">sqrt</span>(<span class="dv">7</span>) <span class="sc">+</span> <span class="fu">abs</span>(<span class="sc">-</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 55.35425</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">*</span> (<span class="dv">8</span> <span class="sc">-</span> <span class="fu">sqrt</span>(<span class="dv">7</span>)) <span class="sc">+</span> <span class="fu">abs</span>(<span class="sc">-</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42.12549</code></pre>
</div>
</div>
</section>
<section id="logical-operators" class="level1">
<h1>Logical operators</h1>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Operator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Less than</td>
<td style="text-align: left;"><code>&lt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Less than or equal to</td>
<td style="text-align: left;"><code>&lt;=</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Greater than</td>
<td style="text-align: left;"><code>&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Greater than or equal to</td>
<td style="text-align: left;"><code>&gt;=</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Exactly equal to</td>
<td style="text-align: left;"><code>==</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Not equal to</td>
<td style="text-align: left;"><code>!=</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Not <code>x</code></td>
<td style="text-align: left;"><code>!x</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>x</code> or <code>y</code></td>
<td style="text-align: left;"><code>x | y</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>x</code> and <code>y</code></td>
<td style="text-align: left;"><code>x &amp; y</code></td>
</tr>
</tbody>
</table>
<p>Logical operators are incredibly helpful for any type of exploratory analysis, data cleaning and/or visualization task.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&gt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&lt;=</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</section>
<section id="objects-in-r" class="level1">
<h1>Objects in R</h1>
<section id="assigning-values-to-objects" class="level2">
<h2 class="anchored" data-anchor-id="assigning-values-to-objects">Assigning values to objects</h2>
<p><code>R</code> stores information as an <em>object</em>. You can name objects whatever you like. Just remember to not use names that are reserved for build-in functions or functions in the packages you use, such as <code>sum</code>, <code>mean</code>, or <code>abs</code>. Most of the time, <code>R</code> will let you use these as names, but it leads to confusion in your code.</p>
<p>A few things to remember</p>
<ul>
<li>Do not use special characters such as <code>$</code> or <code>%</code>. Common symbols that are used in variable names include <code>.</code> or <code>_</code>.</li>
<li>Remember that <code>R</code> is case sensitive.</li>
<li>To assign values to objects, we use the assignment operator <code>&lt;-</code>. Sometimes you will also see <code>=</code> as the assignment operator. This is a matter of preference and subject to debate among <code>R</code> programmers. Personally, I use <code>&lt;-</code> to assign values to objects and <code>=</code> within functions.</li>
<li>The <code>#</code> symbol is used for commenting and demarcation. Any code following <code>#</code> will not be executed.</li>
</ul>
<p>Below, <code>R</code> stores the result of the calculation in an object named <code>result</code>. We can access the value by referring to the object name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.666667</code></pre>
</div>
</div>
<p>If we assign a different value to the object, the value of the object will be changed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="dv">5-3</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</section>
<section id="vectors" class="level2">
<h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<p><code>R</code> can deal with a variety of data types, including vectors, scalars, matrices, data frames, and lists. First, we focus on vectors.</p>
<p>A <strong>vector</strong> is one of the simplest type of data you can work with in <code>R</code>. “A vector or a one-dimensional array simply represents a collection of information stored in a specific order” (Imai 2017: 14). It is essentially a list of data of a single type (either numerical, character, or logical).</p>
<p>To create a vector, we use the function <code>c()</code> (“concatenate”) to combine separate data points. The general format for creating a vector in R is as follows: <code>name_of_vector &lt;- c("what you want to put into the vector")</code> Suppose we have data on the population in millions for the five most populous countries in 2016. The data come from the World Bank.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pop1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1379</span>, <span class="dv">1324</span>, <span class="dv">323</span>, <span class="dv">261</span>, <span class="dv">208</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>pop1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1379 1324  323  261  208</code></pre>
</div>
</div>
<p>We can use the function <code>c()</code> to combine two vectors. Suppose we had data on 5 additional countries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pop2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">194</span>, <span class="dv">187</span>, <span class="dv">161</span>, <span class="dv">142</span>, <span class="dv">127</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> <span class="fu">c</span>(pop1, pop2)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>pop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1379 1324  323  261  208  194  187  161  142  127</code></pre>
</div>
</div>
</section>
<section id="variable-types" class="level2">
<h2 class="anchored" data-anchor-id="variable-types">Variable types</h2>
<p>There are four main variable types you should be familiar with:</p>
<ul>
<li><strong>Numerical</strong>: Any number. <strong>Integer</strong> is a numerical variable without any decimals.</li>
<li><strong>Character</strong>: This is what Stata (and other programming languages such as Python) calls a string. We typically store any alphanumeric data that is not ordered as a character vector.</li>
<li><strong>Logical</strong>: A collection of <code>TRUE</code> and <code>FALSE</code> values.</li>
<li><strong>Factor</strong>: Think about it as an ordinal variable, i.e.&nbsp;an ordered categorical variable.</li>
</ul>
<p>First, lets check which variable type our population data were stored in. The output below tells us that the object <code>pop</code> is of class <em>numeric</em>, and has the dimensions <code>[1:10]</code>, that is 10 elements in one dimension.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:10] 1379 1324 323 261 208 ...</code></pre>
</div>
</div>
<p>Suppose, we wanted to add information on the country names. We can enter these data in <em>character</em> format. To save time, we will only do this for the five most populous countries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>cname <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CHN"</span>, <span class="st">"IND"</span>, <span class="st">"USA"</span>, <span class="st">"IDN"</span>, <span class="st">"BRA"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:5] "CHN" "IND" "USA" "IDN" "BRA"</code></pre>
</div>
</div>
<p>Now, lets code a <em>logical</em> variable that shows whether the country is in Asia or not. Note that <code>R</code> recognizes both <code>TRUE</code> and <code>T</code> (and <code>FALSE</code> and <code>F</code>) as logical values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, F, T, F)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> logi [1:5] TRUE TRUE FALSE TRUE FALSE</code></pre>
</div>
</div>
<p>Lastly, we define a factor variable for the regime type of a country in 2016. This variable can take on one of four values, based on data from the <span class="citation" data-cites="unit2020democracy">Economist Intelligence Unit (<a href="#ref-unit2020democracy" role="doc-biblioref">2020</a>)</span>: Full Democracy, Flawed Democracy, Hybrid Regimes, and Autocracy. Note that empirically, we don’t have a “hybrid category” here. We could define an empty factor level, but we will skip this step here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Autocracy"</span>, <span class="st">"FlawedDem"</span>, <span class="st">"FullDem"</span>, <span class="st">"FlawedDem"</span>, <span class="st">"FlawedDem"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(regime)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(regime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 3 levels "Autocracy","FlawedDem",..: 1 2 3 2 2</code></pre>
</div>
</div>
<p>Data types are important! <code>R</code> will not perform certain operations if you don’t get the variable type right. The good news is that we can switch between data types. This can sometimes be tricky, especially when you are switching from a factor to a numerical type<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. We won’t go into this too much here; just remember: Google is your friend!</p>
<p>Let’s convert the factor variable <code>regime</code> into a character. Also, for practice, lets convert the <code>asia</code> variable to character and back to logical.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>regime <span class="ot">&lt;-</span> <span class="fu">as.character</span>(regime)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(regime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:5] "Autocracy" "FlawedDem" "FullDem" "FlawedDem" "FlawedDem"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">as.character</span>(asia)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> chr [1:5] "TRUE" "TRUE" "FALSE" "TRUE" "FALSE"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>asia <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(asia)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(asia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> logi [1:5] TRUE TRUE FALSE TRUE FALSE</code></pre>
</div>
</div>
<p><strong>Exercise 1</strong>: Why won’t <code>R</code> let us do the following?</p>
<p><code>no_good &lt;- (a,b,c)</code></p>
<p><code>no_good_either &lt;- c(one, two, three)</code></p>
<p><strong>Exercise 2</strong>: What is the class of the following vector?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vector-operations" class="level2">
<h2 class="anchored" data-anchor-id="vector-operations">Vector operations</h2>
<p>You can do a variety of things like have <code>R</code> print out particular values or ranges of values in a vector, replace values, add additional values, etc. We will not get into all of these operations today, but be aware that (for all practical purposes) if you can think of a vector manipulation operation, <code>R</code> can probably do it.</p>
<p>We can do arithmetic operations on vectors! Let’s use the vector of population counts we created earlier and double it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>pop1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1379 1324  323  261  208</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pop1_double <span class="ot">&lt;-</span> pop1 <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>pop1_double</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2758 2648  646  522  416</code></pre>
</div>
</div>
<p><strong>Exercise 4</strong>: What do you think this will do?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>pop1 <span class="sc">+</span> pop2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Exercise 5</strong>: And this?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>pop_c <span class="ot">&lt;-</span> <span class="fu">c</span>(pop1, pop2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="functions" class="level3">
<h3 class="anchored" data-anchor-id="functions">Functions</h3>
<p>There are a number of special functions that operate on vectors and allow us to compute measures of location and dispersion of our data.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>min()</code></td>
<td style="text-align: left;">Returns the minimum of the values or object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>max()</code></td>
<td style="text-align: left;">Returns the maximum of the values or object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>sum()</code></td>
<td style="text-align: left;">Returns the sum of the values or object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>length()</code></td>
<td style="text-align: left;">Returns the length of the values or object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>mean()</code></td>
<td style="text-align: left;">Returns the average of the values or object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>median()</code></td>
<td style="text-align: left;">Returns the median of the values or object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>var()</code></td>
<td style="text-align: left;">Returns the variance of the values or object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sd()</code></td>
<td style="text-align: left;">Returns the variance of the values or object.</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 127</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1379</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 430.6</code></pre>
</div>
</div>
<p><strong>Exercise 6</strong>: Using functions in <code>R</code>, how else could we compute the mean population value?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 430.6</code></pre>
</div>
</div>
</section>
<section id="accessing-elements-of-vectors" class="level3">
<h3 class="anchored" data-anchor-id="accessing-elements-of-vectors">Accessing elements of vectors</h3>
<p>There are many ways to access elements that are stored in an object. Here, we will focus on a method called <em>indexing</em>, using square brackets as an operator.</p>
<p>Below, we use square brackets and the index <code>1</code> to access the first element of the top 5 population vector and the corresponding country name vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>pop1[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1379</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>cname[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHN"</code></pre>
</div>
</div>
<p>We can use indexing to access multiple elements of a vector. For example, we can use indexing to implicitly print the second and fifth elements of the population and the country name vectors, respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>pop[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1324  208</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>cname[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "IND" "BRA"</code></pre>
</div>
</div>
<p>We can assign the first element of the population vector to a new object called <code>first</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>first <span class="ot">&lt;-</span> pop[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Below, we make a copy of the country name vector and delete the <em>last</em> element. Note, that we can use the <code>length()</code> function to achieve the highest level of <em>generalizability</em> in our code. Using <code>length()</code>, we do not need to know the index of the last element of out vector to drop the last element.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>cname_copy <span class="ot">&lt;-</span> cname</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Option 1: Dropping the 5th element</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>cname_copy[<span class="sc">-</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHN" "IND" "USA" "IDN"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Option 2 (for generalizability): Getting the last element and dropping it.</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(cname_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>cname_copy[<span class="sc">-</span><span class="fu">length</span>(cname_copy)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHN" "IND" "USA" "IDN"</code></pre>
</div>
</div>
<p>Indexing can be used to alter values in a vector. Suppose, we notice that we wrongly entered the second element of the regime type vector (or the regime type changed).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>regime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Autocracy" "FlawedDem" "FullDem"   "FlawedDem" "FlawedDem"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>regime[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"FullDem"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>regime</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Autocracy" "FullDem"   "FullDem"   "FlawedDem" "FlawedDem"</code></pre>
</div>
</div>
<p><strong>Exercise 7</strong>: We made even more mistakes when entering the data! We want to subtract 10 from the third and fifth element of the top 5 population vector. <em>How would you do it</em>?</p>
<div class="cell">

</div>
</section>
<section id="more-functions" class="level3">
<h3 class="anchored" data-anchor-id="more-functions">More functions</h3>
<p>The myriad of functions that are either built-in to base <code>R</code> or parts of user-written packages are the greatest strength of <code>R</code>. For most applications we encounter in our daily programming practice, <code>R</code> already has a function, or someone smart wrote one. Below are a few additional helpful functions from base <code>R</code>.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>seq()</code></td>
<td style="text-align: left;">Returns sequence from input1 to input2 by input3.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>rep()</code></td>
<td style="text-align: left;">Repeats input1 input2 number of times.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>names()</code></td>
<td style="text-align: left;">Returns the names (labels) of objects.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>which()</code></td>
<td style="text-align: left;">Returns the index of objects.</td>
</tr>
</tbody>
</table>
<p>Let’s create a vector of indices for our top 5 population data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>cindex <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="fu">length</span>(pop1), <span class="at">by =</span> <span class="dv">1</span>)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>cindex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p>Suppose we wanted to only print a sequence of even numbers between 2 and 10. We can do so by adjusting the <code>by</code> operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10</code></pre>
</div>
</div>
<p>We can use the <code>rep()</code> function to repeat data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">30</span>, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30 30 30 30</code></pre>
</div>
</div>
<p>Suppose, we wanted to record whether we had completed the data collection process for the top 10 most populous countries. First, suppose we completed the process on every second country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>completed <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"yes"</span>,<span class="st">"no"</span>), <span class="dv">5</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>completed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "yes" "no"  "yes" "no"  "yes" "no"  "yes" "no"  "yes" "no" </code></pre>
</div>
</div>
<p>Now suppose that we have completed the data collection process for the first 5 countries, but not the latter 5 countries (we don’t have their names, location, or regime type yet).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>completed2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"yes"</span>,<span class="st">"no"</span>), <span class="at">each =</span> <span class="dv">5</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>completed2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "yes" "yes" "yes" "yes" "yes" "no"  "no"  "no"  "no"  "no" </code></pre>
</div>
</div>
<p>We can give our data informative labels. Let’s use the country names vector as labels for our top 5 population vector.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>cname</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHN" "IND" "USA" "IDN" "BRA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1) <span class="ot">&lt;-</span> cname</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pop1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHN" "IND" "USA" "IDN" "BRA"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>pop1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> CHN  IND  USA  IDN  BRA 
1379 1324  323  261  208 </code></pre>
</div>
</div>
<p>We can use labels to access data using indexing and logical operators. Suppose, we wanted to access the population count for Brazil in our top 5 population data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>pop1[<span class="fu">names</span>(pop1) <span class="sc">==</span> <span class="st">"BRA"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>BRA 
208 </code></pre>
</div>
</div>
<p><strong>Exercise 9</strong> Access all top 5 population ratings that are greater or equal than the mean value of population ratings.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 699</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> CHN  IND 
1379 1324 </code></pre>
</div>
</div>
<p><strong>Exercise 10</strong> Access all top 5 population ratings that are less than the population of the most populous country, but not the US.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> IND  IDN  BRA 
1324  261  208 </code></pre>
</div>
</div>
</section>
<section id="operating-on-multiple-vectors-simultaneously" class="level3">
<h3 class="anchored" data-anchor-id="operating-on-multiple-vectors-simultaneously">Operating on multiple vectors simultaneously</h3>
<p>We did not work with data frames yet, but remember that our data input is ordered. The first element of the <code>pop1</code> vector corresponds with the first element of the <code>cname</code>, <code>regime</code>, and <code>asia</code> vectors. We can use this to run more sophisticated queries on our data.</p>
<p>Suppose, we wanted to know the regime type of Indonesia. Given that our vectors are ordered, we can use indexing to extract the data. First, lets see what happens if we run a simple logical query.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>cname <span class="sc">==</span> <span class="st">"IDN"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>regime[cname <span class="sc">==</span> <span class="st">"IDN"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FlawedDem"</code></pre>
</div>
</div>
<p>We can also use the <code>which()</code> function that returns the index of the vector element.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(cname <span class="sc">==</span> <span class="st">"IDN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>regime[<span class="fu">which</span>(cname <span class="sc">==</span> <span class="st">"IDN"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FlawedDem"</code></pre>
</div>
</div>
<p>Using logical statements, we can run more complex queries. Below, we print the population count for all Asian countries within the top 5 most populous countries that are not autocracies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>pop1[asia <span class="sc">==</span> T <span class="sc">&amp;</span> regime <span class="sc">!=</span> <span class="st">"Autocracy"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> IND  IDN 
1324  261 </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="working-with-data-frames-in-r" class="level1">
<h1>Working with data frames in <code>R</code></h1>
<section id="using-packages" class="level2">
<h2 class="anchored" data-anchor-id="using-packages">Using packages</h2>
<p>So far, we have only used functions that are already built into <code>R</code>. One of the greatest strengths of <code>R</code> is its massive collection of user-written packages that contain task-specific functions. The official repository for <code>R</code> packages, CRAN, currently records 15365 packages,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> with many more under development.</p>
<p>If a package is available on CRAN, you can install it in two ways.</p>
<ol type="1">
<li>In RStudio, click on the “Install” button under the “Packages” tab, enter the package name and desired location on your computer (in most cases, do not change the default), and click “Install”. OR</li>
<li>Run <code>install.packages("packagename")</code>, where <code>packagename</code> should be replaced with the name of the desired package.</li>
</ol>
<p>Below, we will use use the <code>here</code> package to find and import a .csv file. To make the <code>here</code> package available for use, install it and then use the <code>library()</code> command to load it. While packages need to be installed only once, the <code>library()</code> command needs to be run every time you want to use a particular package.</p>
<p>Package managers (e.g.&nbsp;<code>pacman</code>) can also be used to install and load packages. An example use case of <code>pacman</code> can be seen in our first script <code>00_packages.R</code>, which we ran earlier in the workshop.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at C:/Users/kohal/Documents/GitHub/bgts-workshop-r-intro</code></pre>
</div>
</div>
</section>
<section id="importing-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-data">Importing data</h2>
<p>Most data formats we commonly use are not native to <code>R</code> and need to be imported. Luckily, there is a variety of packages available to import just about any non-native format. <!-- One of the essential libraries is called `foreign` and includes functions to import .csv, .dta (Stata), .dat, ,.sav (SPSS), etc. This package is normally already downloa --></p>
<p>In this example, we will use a subset of data from the <a href="https://www.acleddata.com/">Armed Conflict Location &amp; Event Data Project (ACLED)</a>, which offers real-time data and analysis on political violence and protests around the world. The <code>ACLED_countries.csv</code> dataset includes the count of riot and protest events from January 2000 to December 2019 for many countries.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>Below, we read the data using the <code>read.csv()</code> command.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"ACLED_countries.csv"</span>),</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stringsAsFactors =</span> F) <span class="co"># ensure string vars are not automatically imported as factors </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dimensions-of-a-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="dimensions-of-a-data-frame">Dimensions of a data frame</h2>
<p>Let’s find out what these data look like. First, use the <code>str()</code> function to explore the variable names and which data class they are stored in. Note: <code>int</code> stands for <code>integer</code> and is a special case of the class <code>numeric</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   103 obs. of  5 variables:
 $ country                : chr  "Afghanistan" "Albania" "Algeria" "Angola" ...
 $ region                 : chr  "Southern Asia" "Europe" "Northern Africa" "Middle Africa" ...
 $ nconflicts             : int  40765 582 7362 1108 3118 12627 1861 16802 293 215 ...
 $ nconflict_no_fatalities: int  23946 581 5321 728 3110 12578 1846 13114 293 165 ...
 $ fatalities             : int  119973 1 8451 13788 8 59 22 4640 0 114 ...</code></pre>
</div>
</div>
<p>If we are only interested in what the variables are called, we can use the <code>names()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"                 "region"                 
[3] "nconflicts"              "nconflict_no_fatalities"
[5] "fatalities"             </code></pre>
</div>
</div>
<p>We can alter the names of vectors by using the <code>names()</code> function and indexing. Because data frames are essentially just combinations of vectors, we can do the same for variable names inside data frames. Suppose we want to change the variable <code>nconflicts</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"nconflict"</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"                 "region"                 
[3] "nconflict"               "nconflict_no_fatalities"
[5] "fatalities"             </code></pre>
</div>
</div>
<p>We can use the <code>summary()</code> function to get a first look at the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   country             region            nconflict      
 Length:103         Length:103         Min.   :    1.0  
 Class :character   Class :character   1st Qu.:  315.5  
 Mode  :character   Mode  :character   Median : 1250.0  
                                       Mean   : 6216.3  
                                       3rd Qu.: 5993.5  
                                       Max.   :70734.0  
 nconflict_no_fatalities   fatalities      
 Min.   :    1           Min.   :     0.0  
 1st Qu.:  289           1st Qu.:    17.5  
 Median : 1037           Median :   236.0  
 Mean   : 4667           Mean   :  9543.3  
 3rd Qu.: 4536           3rd Qu.:  7020.0  
 Max.   :63665           Max.   :119973.0  </code></pre>
</div>
</div>
<p>A data frame has two dimensions: rows and columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(mydata) <span class="co"># Number of rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 103</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(mydata) <span class="co"># Number of columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mydata) <span class="co"># Rows first then columns.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 103   5</code></pre>
</div>
</div>
</section>
<section id="accessing-elements-of-a-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="accessing-elements-of-a-data-frame">Accessing elements of a data frame</h2>
<p>As a rule, whenever we use two-dimensional indexing in <code>R</code>, the order is: <code>[row, column]</code>. To access the first row of the data frame, we specify the row we want to see and leave the column slot following the comma empty.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country        region nconflict nconflict_no_fatalities fatalities
1 Afghanistan Southern Asia     40765                   23946     119973</code></pre>
</div>
</div>
<p>We can use the concatenate function <code>c()</code> to access multiple rows (or columns) at once. Let’s print out the first and second row of the dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country        region nconflict nconflict_no_fatalities fatalities
1 Afghanistan Southern Asia     40765                   23946     119973
2     Albania        Europe       582                     581          1</code></pre>
</div>
</div>
<p>We can also access a range of rows by separating the minimum and maximum value with a <code>:</code>. Let’s print out the first five rows of the dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country                    region nconflict nconflict_no_fatalities
1 Afghanistan             Southern Asia     40765                   23946
2     Albania                    Europe       582                     581
3     Algeria           Northern Africa      7362                    5321
4      Angola             Middle Africa      1108                     728
5     Armenia Caucasus and Central Asia      3118                    3110
  fatalities
1     119973
2          1
3       8451
4      13788
5          8</code></pre>
</div>
</div>
<p>If we try to access a data point that is out of bounds, <code>R</code> returns the value <code>NULL</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>mydata[<span class="dv">3</span>,<span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<p><strong>Exercise 1</strong> Access the element of the dataframe <code>mydata</code> that is stored in row 1, column 1.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan"</code></pre>
</div>
</div>
<p><strong>Exercise 2</strong> Access the element of the data frame <code>mydata</code> that is stored in column 3, row 100.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 503</code></pre>
</div>
</div>
<section id="the-operator" class="level3">
<h3 class="anchored" data-anchor-id="the-operator">The <code>$</code> operator</h3>
<p>The <code>$</code> operator in <code>R</code> is used to specify a variable within a data frame. This is an alternative to indexing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>nconflict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 40765   582  7362  1108  3118 12627  1861 16802   293   215   459    52
 [13]   765  2105  7760  1919  2621  4625   912   411   312 14519   112 10260
 [25]    50   191   190  5122   215   197  1446   858  1312  1121   151 67561
 [37]  3371  5708 22354  1580  1838   491   374  6427   289    39   319    41
 [49]  2956    83  1294  8857  1365   512   384  3193   598   444   213  2177
 [61]  1250  9070   682  5143   971 15011   275     9 54496  6568  9690     5
 [73]   243  1134  3734   370  6096   963  1275  1079 29667 11667  6227     2
 [85]  3855 12528 70734    68   782  7420   321  5756     1 10334    21  4866
 [97] 30131     4   102   503 45298  1148  5891</code></pre>
</div>
</div>
</section>
<section id="table-function" class="level3">
<h3 class="anchored" data-anchor-id="table-function"><code>table()</code> function</h3>
<p>The <code>table()</code> function can be used to tabularize one or more variables. For example, lets find out how many observations (i.e.&nbsp;individual countries) we have per region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Caucasus and Central Asia            Eastern Africa                    Europe 
                        8                        13                        15 
            Middle Africa               Middle East           Northern Africa 
                        8                        15                         7 
       South-Eastern Asia           Southern Africa             Southern Asia 
                        8                         8                         6 
           Western Africa 
                       15 </code></pre>
</div>
</div>
<p>Using logical operations, we can create more complex tabularizations. For example, below, we show how many countries have above average number of conflict events per region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata<span class="sc">$</span>nconflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    1.0   315.5  1250.0  6216.3  5993.5 70734.0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>region, mydata<span class="sc">$</span>nconflict <span class="sc">&gt;</span> <span class="fu">mean</span>(mydata<span class="sc">$</span>nconflict))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                           
                            FALSE TRUE
  Caucasus and Central Asia     7    1
  Eastern Africa                9    4
  Europe                       14    1
  Middle Africa                 7    1
  Middle East                  10    5
  Northern Africa               3    4
  South-Eastern Asia            5    3
  Southern Africa               7    1
  Southern Asia                 2    4
  Western Africa               14    1</code></pre>
</div>
</div>
<p><strong>Exercise 3</strong>: How would you access all elements of the variable <code>country</code> using indexing rather than the <code>$</code> operator?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan" "Albania"     "Algeria"     "Angola"      "Armenia"    
[6] "Azerbaijan" </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan" "Albania"     "Algeria"     "Angola"      "Armenia"    
[6] "Azerbaijan" </code></pre>
</div>
</div>
<p><strong>Exercise 4</strong>: How would you find the maximum value for number of events using the <code>$</code> operator?</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 70734</code></pre>
</div>
</div>
<p><strong>Exercise 5</strong>: Print the country that corresponds to the maximum world population value using the <code>$</code> operator and indexing!</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Syria"</code></pre>
</div>
</div>
<p><strong>Exercise 6</strong>: Print out every second element from the variable <code>country</code> using indexing methods and the sequence function <code>seq()</code>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan"            "Algeria"                "Armenia"               
[4] "Bahrain"                "Belarus"                "Bosnia and Herzegovina"</code></pre>
</div>
</div>
</section>
</section>
<section id="nas-in-r" class="level2">
<h2 class="anchored" data-anchor-id="nas-in-r">NAs in <code>R</code></h2>
<p><code>NA</code> is how <code>R</code> denotes missing values. For certain functions, <code>NA</code>s cause problems.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">3</span>)</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vec) <span class="co">#Result is NA!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec) <span class="co">#Result is NA!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>We can tell <code>R</code> to remove the NA and execute the function on the remainder of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vec, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
</section>
<section id="adding-observations" class="level2">
<h2 class="anchored" data-anchor-id="adding-observations">Adding observations</h2>
<p>First, lets add another observation to the data. Suppose we wanted to add an observation for Germany, which will be a missing value. We can use the same operations we used for vectors to add data. Here, we will use the <code>rbind()</code> function to do so. <code>rbind()</code> stands for “row bind.” Save the output in a new data frame!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Germany"</span>, <span class="st">"Europe"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>)</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>mydata_new <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mydata, obs)</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mydata_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 104   5</code></pre>
</div>
</div>
</section>
<section id="adding-variables" class="level2">
<h2 class="anchored" data-anchor-id="adding-variables">Adding variables</h2>
<p>We can also create new variables that use information from the existing data. If we know the number of conflict events without fatalities by country, we can calculate the number of conflict events <em>with</em> fatalities to generate the variable <code>nconflict_fatalities</code>. By using the <code>$</code> operator, we can directly assign the new variable to the data frame <code>mydata_new</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>nconflict_fatalities <span class="ot">&lt;-</span> mydata<span class="sc">$</span>nconflict <span class="sc">-</span> mydata<span class="sc">$</span>nconflict_no_fatalities</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata, <span class="dv">3</span>) <span class="co">#prints out the first 3 rows of the data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country          region nconflict nconflict_no_fatalities fatalities
1 Afghanistan   Southern Asia     40765                   23946     119973
2     Albania          Europe       582                     581          1
3     Algeria Northern Africa      7362                    5321       8451
  nconflict_fatalities
1                16819
2                    1
3                 2041</code></pre>
</div>
</div>
<p>We could also compute the average number of fatalities per conflict, computed as the sum of fatalities (<code>fatalities</code> variable) divided by the number of conflicts (<code>nconflict</code> variable).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>av_fatalities <span class="ot">&lt;-</span> mydata<span class="sc">$</span>fatalities<span class="sc">/</span>mydata<span class="sc">$</span>nconflict</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subsetting-data" class="level2">
<h2 class="anchored" data-anchor-id="subsetting-data">Subsetting data</h2>
<p>Suppose we want to figure out which country in Northern Africa has the highest number of riot and protest events. We can figure this out by first subsetting our dataset to only include countries in the region, then looking up the maximum value for <code>nconflict</code>. Below, we assign the output to a new object called <code>mydata_na</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>mydata_na <span class="ot">&lt;-</span> mydata[mydata<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"Northern Africa"</span>,]</span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(mydata_na<span class="sc">$</span>nconflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12528</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>mydata_na<span class="sc">$</span>country[mydata_na<span class="sc">$</span>nconflict <span class="sc">==</span> <span class="fu">max</span>(mydata_na<span class="sc">$</span>nconflict)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sudan"</code></pre>
</div>
</div>
</section>
<section id="saving-data" class="level2">
<h2 class="anchored" data-anchor-id="saving-data">Saving data</h2>
<p>Suppose we wanted to save this newly created data frame. We have multiple options to do so. If we wanted to save it as a native <code>.RData</code> format, we would run the following command.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure you specified the right working directory!</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co"># save(mydata, file = here("mydata_new.RData"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Most of the time, however, we would want to save our data in formats that can be read by other programs as well. <code>.csv</code> is an obvious choice.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write.csv(mydata_new, file = "mydata_new.csv")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="very-basic-data-visualization" class="level1">
<h1>(Very basic) data visualization</h1>
<p>Today, we will be covering some basics of data visualization in <code>R</code> using the native plotting functions. For more advanced data visualization functions, see the <code>ggplot2</code> package. While we will not get to this today, the skills we cover with base <code>R</code> and data wrangling/management provide a foundation for picking this up later on in your <code>R</code> learning journey!</p>
<section id="basic-graphical-summaries-of-data" class="level2">
<h2 class="anchored" data-anchor-id="basic-graphical-summaries-of-data">Basic graphical summaries of data</h2>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Operator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Histogram</td>
<td style="text-align: left;"><code>hist()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Boxplot</td>
<td style="text-align: left;"><code>boxplot()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kernel density plot</td>
<td style="text-align: left;"><code>plot(density())</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Basic scatterplot</td>
<td style="text-align: left;"><code>plot()</code></td>
</tr>
</tbody>
</table>
<section id="boxplot-of-population-density" class="level3">
<h3 class="anchored" data-anchor-id="boxplot-of-population-density">Boxplot of population density</h3>
<p>We can get an overview of the number of conflict events per country using the <code>boxplot()</code> function. The distribution appears to be highly skewed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(mydata<span class="sc">$</span>fatalities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-134-1.png" class="img-fluid" width="288"></p>
</div>
</div>
<p>Suppose we wanted to know whether there are on average more fatalities in countries with a higher overall number of conflicts. Let’s first look at the distribution of number of conflicts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mydata<span class="sc">$</span>nconflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    1.0   315.5  1250.0  6216.3  5993.5 70734.0 </code></pre>
</div>
</div>
<p>Create a new dummy (binary) variable that codes whether a state has a relatively high number of conflicts (greater than the median) using the <code>ifelse()</code> function. <code>ifelse()</code> has the following general syntax:</p>
<p><code>ifelse(condition, value if TRUE, value if FALSE)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(mydata<span class="sc">$</span>nconflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1250</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>mydata<span class="sc">$</span>nconflict_high <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(mydata<span class="sc">$</span>nconflict <span class="sc">&gt;</span> <span class="fu">median</span>(mydata<span class="sc">$</span>nconflict), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mydata<span class="sc">$</span>nconflict_high)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0 1 0 1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>nconflict_high) <span class="co"># We split the observations (almost) sexactly in half.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 0  1 
52 51 </code></pre>
</div>
</div>
<p>We can display two indicators in the same boxplot. We can use this feature to answer the question whether states with more conflict events on average see more fatalities (i.e.&nbsp;whether conflicts are not just more numerous but also deadlier).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(mydata<span class="sc">$</span>av_fatalities <span class="sc">~</span> mydata<span class="sc">$</span>nconflict_high)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-140-1.png" class="img-fluid" width="384"></p>
</div>
</div>
<p>Suppose we wanted to know which region in Africa sees the most fatalities in riots or protests. The <code>%in%</code> operator to subset to a set of values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(mydata<span class="sc">$</span>region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Caucasus and Central Asia            Eastern Africa                    Europe 
                        8                        13                        15 
            Middle Africa               Middle East           Northern Africa 
                        8                        15                         7 
       South-Eastern Asia           Southern Africa             Southern Asia 
                        8                         8                         6 
           Western Africa 
                       15 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>africa <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Eastern Africa"</span>, </span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Middle Africa"</span>,</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Northern Africa"</span>,</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Southern Africa"</span>,</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Western Africa"</span>)</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(mydata<span class="sc">$</span>fatalities[mydata<span class="sc">$</span>region <span class="sc">%in%</span> africa] <span class="sc">~</span> mydata<span class="sc">$</span>region[mydata<span class="sc">$</span>region <span class="sc">%in%</span> africa],</span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">cex.axis =</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-142-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="histogram-of-number-of-conflict-events" class="level3">
<h3 class="anchored" data-anchor-id="histogram-of-number-of-conflict-events">Histogram of number of conflict events</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(mydata<span class="sc">$</span>nconflict, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-144-1.png" class="img-fluid" width="384"></p>
</div>
</div>
</section>
<section id="density-plot-of-fatalities" class="level3">
<h3 class="anchored" data-anchor-id="density-plot-of-fatalities">Density plot of fatalities</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(mydata<span class="sc">$</span>fatalities))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-146-1.png" class="img-fluid" width="384"></p>
</div>
</div>
</section>
</section>
<section id="basic-scatter-plots" class="level2">
<h2 class="anchored" data-anchor-id="basic-scatter-plots">Basic scatter plots</h2>
<p>Does the number of fatalities vary with the number of overall conflict events?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mydata<span class="sc">$</span>nconflict, mydata<span class="sc">$</span>fatalities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-148-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>This is really hard to see. We could log-transform both variables to make the relationship clearer. The distribution of the log-transformed variables are less skewed and closer to a normal distribution. Not that logging the variable will drop 8 observations in which the number of protests/riots without fatalities is zero.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mydata<span class="sc">$</span>nconflict[mydata<span class="sc">$</span>nconflict <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(mydata<span class="sc">$</span>fatalities[mydata<span class="sc">$</span>fatalities <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(<span class="fu">log</span>(mydata<span class="sc">$</span>nconflict)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-150-1.png" class="img-fluid" width="480"></p>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(<span class="fu">log</span>(mydata<span class="sc">$</span>fatalities)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-150-2.png" class="img-fluid" width="480"></p>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">log</span>(mydata<span class="sc">$</span>nconflict), <span class="fu">log</span>(mydata<span class="sc">$</span>fatalities))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-150-3.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Aside from arguably not being very informative, the scatterplot we created in base <code>R</code> is not very pretty. Let’s give it titles, use color and shapes!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mydata<span class="sc">$</span>fatalities, mydata<span class="sc">$</span>nconflict,</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"ACLED (2000-2019)"</span>, <span class="co">#Adding a main title.</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Fatalities"</span>, <span class="co">#Adding a x-axis title.</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Number of Conflicts"</span>, <span class="co">#Adding a y-axis title.</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"tomato"</span>, <span class="co">#Changing the color of the data points.</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">18</span>) <span class="co">#Changing the shape</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-152-1.png" class="img-fluid" width="480"></p>
</div>
</div>
<p>Yeah, ok. Its not much prettier (especially the labeling on the axes), but it is <em>in theory</em> publishable…</p>
<p>A few additional notes on graphical options:</p>
<ul>
<li><code>R</code> can display any color in the RBG or HEX system. However it also has a ton of colors that you can just refer to by name, see http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf.</li>
<li>Same with the shapes and line types, see http://www.cookbook-r.com/Graphs/Shapes_and_line_types/.</li>
<li><code>R</code> colors in all their glory: http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf.</li>
</ul>
</section>
</section>
<section id="tidy-data-in-the-tidyverse" class="level1">
<h1>Tidy data in the <code>tidyverse</code></h1>
<section id="what-is-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="what-is-tidy-data">What is tidy data?</h2>
<p>The <a href="https://www.tidyverse.org/">tidyverse</a> is “an opinionated <strong>collection of <code>R</code> packages</strong> designed for data science. All packages share an underlying design philosophy, grammar, and data structures”.</p>
<p>The core principles of “tidy data” are as follows:</p>
<ul>
<li>Every column is a variable.</li>
<li>Every row is an observation.</li>
<li>Every cell is a single value.</li>
</ul>
</section>
<section id="wide-versus-long-data" class="level2">
<h2 class="anchored" data-anchor-id="wide-versus-long-data">Wide versus long data</h2>
<p>For <strong>wide</strong> data formats, each unit’s responses are in a single row. For example:</p>
<table class="table">
<thead>
<tr class="header">
<th>Country</th>
<th>Area</th>
<th>Pop1990</th>
<th>Pop1991</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>300</td>
<td>56</td>
<td>58</td>
</tr>
<tr class="even">
<td>B</td>
<td>150</td>
<td>40</td>
<td>45</td>
</tr>
</tbody>
</table>
<p>For <strong>long</strong> data formats, each row denotes the observation of a unit at a given point in time. For example:</p>
<table class="table">
<thead>
<tr class="header">
<th>Country</th>
<th>Year</th>
<th>Area</th>
<th>Pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>1990</td>
<td>300</td>
<td>56</td>
</tr>
<tr class="even">
<td>A</td>
<td>1991</td>
<td>300</td>
<td>58</td>
</tr>
<tr class="odd">
<td>B</td>
<td>1990</td>
<td>150</td>
<td>40</td>
</tr>
<tr class="even">
<td>B</td>
<td>1991</td>
<td>150</td>
<td>45</td>
</tr>
</tbody>
</table>
</section>
<section id="before-we-get-our-hands-dirty-introducing-the-piping-operator" class="level2">
<h2 class="anchored" data-anchor-id="before-we-get-our-hands-dirty-introducing-the-piping-operator">Before we get our hands dirty: introducing the Piping Operator <code>|&gt;</code></h2>
<p>Using the <strong>pipe operator</strong> will make <code>R</code> code faster and more legible, because we are not saving every output in a separate data frame, but passing it on to a new function.</p>
<p>Across different sets of <code>R</code> code you might encounter, you will observe two different types of pipe operators:</p>
<ul>
<li><strong>The tidyverse pipe operator</strong> (<code>%&gt;%</code>), which requires the <code>magrittr</code> tidyverse package, is the original pipe operator. It is commonly used in <code>R</code> scripts that predominantly rely on tidyverse packages, although some may use the new pipe operator out of personal preference.</li>
<li><strong>The base R pipe operator</strong> (<code>|&gt;</code>) is a recent development in base <code>R</code>, and does not depend on installing or loading any packages. It’s functionally similar to the <code>magrittr</code> pipe, and accommodates code from a variety of packages (and not just the tidyverse ones)</li>
</ul>
</section>
</section>
<section id="reshaping-data-with-tidyr" class="level1">
<h1>Reshaping data with <code>tidyr</code></h1>
<section id="introducing-the-data" class="level2">
<h2 class="anchored" data-anchor-id="introducing-the-data">Introducing the data</h2>
<p>For this exercise, we will be using the Uppsala Conflict Data Program (UCDP) Conflict Onset data. This data provides country-year level data for armed conflict onsets with the following variables:</p>
<ul>
<li><code>gwcode</code>: a numeric vector for the Gleditsch-Ward state code</li>
<li><code>year</code>: a numeric vector for the year</li>
<li><code>sumnewconf</code>: a numeric vector for the sum of new conflicts/conflict-dyads</li>
<li><code>sumonset1</code>: a numeric vector for the sum of new conflict episodes, whether because this is a new conflict or because there is more than one year since last conflict episode</li>
<li><code>sumonset2</code>: a numeric vector for the sum of new conflict episodes, whether because this is a new conflict or because there is more than two years since last conflict episode</li>
<li><code>sumonset3</code>: a numeric vector for the sum of new conflict episodes, whether because this is a new conflict or because there is more than three years since last conflict episode</li>
<li><code>sumonset5</code>: a numeric vector for the sum of new conflict episodes, whether because this is a new conflict or because there is more than five years since last conflict episode</li>
<li><code>sumonset10</code>: a numeric vector for the sum of new conflict episodes, whether because this is a new conflict or because there is more than 10 years since last conflict episode</li>
</ul>
<p>We will load it in using the <code>peacesciencer</code> package <span class="citation" data-cites="miller2022peacesciencer">(<a href="#ref-miller2022peacesciencer" role="doc-biblioref">Miller 2022</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>ucdp_onsets <span class="ot">&lt;-</span> peacesciencer<span class="sc">::</span>ucdp_onsets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>NOTE:</strong> The <code>::</code> operator specifies that we want to use the <em>object</em> <code>ucdp_onsets</code> from the <em>package</em> <code>dplyr</code>. This explicit programming is useful when functions or objects are contained in multiple packages to avoid confusion.</p>
</section>
<section id="pivot_longer" class="level2">
<h2 class="anchored" data-anchor-id="pivot_longer"><code>pivot_longer()</code></h2>
<p>We use the <code>pivot_longer()</code> function to reshape data from wide to long. In general, the syntax of the data is as follows:</p>
<p><code>new_df &lt;- pivot_longer(old_df, columns to transform, names_to = "name", values_to = "value")</code></p>
<p>Let’s transform <code>ucdp_onsets</code> from wide to long.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_onsets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwcode"     "year"       "sumnewconf" "sumonset1"  "sumonset2" 
[6] "sumonset3"  "sumonset5"  "sumonset10"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>onsets_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  ucdp_onsets,</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>  sumnewconf<span class="sc">:</span>sumonset10, <span class="co"># we will go over selecting multiple columns shortly! </span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_to =</span> <span class="st">"variable"</span>, </span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">values_to =</span> <span class="st">"sum_onsets"</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(onsets_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 4
  gwcode  year variable   sum_onsets
   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
1      2  1946 sumnewconf          0
2      2  1946 sumonset1           0
3      2  1946 sumonset2           0
4      2  1946 sumonset3           0
5      2  1946 sumonset5           0
6      2  1946 sumonset10          0</code></pre>
</div>
</div>
</section>
<section id="pivot_wider" class="level2">
<h2 class="anchored" data-anchor-id="pivot_wider"><code>pivot_wider()</code></h2>
<p>Suppose we wanted to revert our operation (or generally shape data from a long to a wide format), we can use <code>tidyr</code>’s <code>pivot_wider()</code> function. The syntax is similar to <code>pivot_longer()</code>.</p>
<p><code>new_df &lt;- pivot_wider(old_df, names_from = key, values_from = value)</code>,</p>
<p>where <code>key</code> refers to the column which contains the values that are to be converted to column names and <code>value</code> specifies the column that contains the values which is to be stored in the newly created columns.</p>
<p>Below, we semi-revert the creation of a single column containing the variable types and a single column containing our variable values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(onsets_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwcode"     "year"       "variable"   "sum_onsets"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>onsets_wide <span class="ot">&lt;-</span> onsets_long <span class="sc">|&gt;</span> </span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> variable,</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> sum_onsets) </span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(onsets_wide) <span class="co"># looks like the original one! </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 8
  gwcode  year sumnewconf sumonset1 sumonset2 sumonset3 sumonset5 sumonset10
   &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
1      2  1946          0         0         0         0         0          0
2      2  1947          0         0         0         0         0          0
3      2  1948          0         0         0         0         0          0
4      2  1949          0         0         0         0         0          0
5      2  1950          1         1         1         1         1          1
6      2  1951          0         0         0         0         0          0</code></pre>
</div>
</div>
</section>
</section>
<section id="data-wrangling-using-dplyr" class="level1">
<h1>Data wrangling using <code>dplyr</code></h1>
<p>Transforming and combining data from different sources into formats suitable for statistical analysis and visualization lies at the heart of the data science workflow. In many data science applications, an estimated 50% to 80% of a project is spent on data collection, cleaning, and wrangling. Beyond getting into the right shape with <code>tidyr</code>, <code>dplyr</code> is home to many of the common data management functions. Together with <code>lubridate</code> (working with date/time objects) and <code>stringr</code> (string operations using regular expressions), these packages offer functionality for the majority of data cleaning and reshaping task in <code>R</code>.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>RStudio has a number of great cheat sheets available online: https://rstudio.com/resources/cheatsheets/. Check out the “Data transformation with <code>dplyr</code> cheat sheet!</p>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The data</h2>
<p>For the exercises that follow, we will be using data from the Uppsala Conflict Data Project (UCDP) Armed Conflict Data (ACD) <span class="citation" data-cites="gleditsch2002armed pettersson2019organized">(<a href="#ref-gleditsch2002armed" role="doc-biblioref">Gleditsch et al. 2002</a>; <a href="#ref-pettersson2019organized" role="doc-biblioref">Therése Pettersson, Högbladh, and Öberg 2019</a>)</span>. The data comprises of the following variables:</p>
<ul>
<li><code>conflict_id</code>: a conflict identifier, not to be confused with an episode identifier (which I don’t think UCDP offers)</li>
<li><code>year</code>: a numeric vector for the year</li>
<li><code>gwno_a</code>: the Gleditsch-Ward state code for the state on side A of the armed conflict</li>
<li><code>gwno_a_2nd</code>: the Gleditsch-Ward state code for the state that actively supported side A of the armed conflict with the use of troops</li>
<li><code>gwno_b</code>: the Gleditsch-Ward state code for the actor on side B of the armed conflict</li>
<li><code>gwno_b_2nd</code>: the Gleditsch-Ward state code for the state that actively supported side B of the armed conflict with the use of troops</li>
<li><code>incompatibility</code>: a character vector for the main conflict issue (“territory”, “government”, “both”)</li>
<li><code>intensity_level</code>: a numeric vector for the intensity level in the calendar year (1 = minor (25-999 deaths), 2 = war (&gt;1,000 deaths))</li>
<li><code>type_of_conflict</code>: a character vector for the type of conflict (“extrasystemic”, “interstate”, “intrastate”, “II”). “II” is a simple abbreviation of “internationalized intrastate”</li>
<li><code>start_date</code>: a date of the first battle-related death in the conflict, not to be confused with the first battle-related death of the episode</li>
<li><code>start_prec</code>: the level of precision for start_date</li>
<li><code>start_date2</code>: a date of the first battle-related death in the episode, not to be confused with the first battle-related death of the conflict</li>
<li><code>start_prec2</code>: the level of precision for start_date2</li>
<li><code>ep_end</code>: a dummy variable for whether the conflict episode ended in the calendar year of observation</li>
<li><code>ep_end_date</code>: the episode end date, if applicable</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>raw <span class="ot">&lt;-</span> peacesciencer<span class="sc">::</span>ucdp_acd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions-in-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="functions-in-dplyr">Functions in <code>dplyr</code></h2>
<p><code>dplyr</code> uses a strategy called “Split - Apply - Combine”. Some of the key functions include:</p>
<ul>
<li><code>select()</code>: Subset columns.</li>
<li><code>filter()</code>: Subset rows.</li>
<li><code>arrange()</code>: Reorders rows.</li>
<li><code>mutate()</code>: Add columns to existing data.</li>
<li><code>group_by()</code>: Group data by one or more variables.</li>
<li><code>summarise()</code> or <code>summarize()</code>: Summarize the data set.</li>
</ul>
</section>
<section id="using-select" class="level2">
<h2 class="anchored" data-anchor-id="using-select">Using <code>select()</code></h2>
<p>First, let’s use only a subsample of variables in the data frame. Notice a couple of things in the code below:</p>
<ul>
<li>We can assign the output to a new data set.</li>
<li>We use the pipe operator to connect commands and create a single flow of operations.</li>
<li>We can use the select function to rename variables.</li>
<li>Instead of typing each variable, we can select sequences of variables.</li>
<li>Note that the <code>everything()</code> command inside <code>select()</code> will select all variables.</li>
</ul>
<section id="selecting-variables-with-select" class="level3">
<h3 class="anchored" data-anchor-id="selecting-variables-with-select">Selecting variables with <code>select()</code></h3>
<p>Let’s say that we are only interested in inspecting the year and main state actors involved in specific conflicts. It would then make sense to <code>select</code> the relevant columns individually.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>df_sub1 <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    conflict_id, </span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>    year,</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>    gwno_a,</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>    gwno_b</span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-9"><a href="#cb195-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_sub1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 4
  conflict_id  year gwno_a gwno_b
        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1       11342  2012    750     NA
2       11342  2014    750     NA
3       11343  1967    651    666
4       11343  1969    651    666
5       11343  1970    651    666
6       11343  1973    651    666</code></pre>
</div>
</div>
<p>We can also use the <code>View()</code> function to look at the resulting dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(df_sub1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s expand this subset to include other columns by selecting multiple variables at once.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>df_sub2 <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>    conflict_id<span class="sc">:</span>type_of_conflict</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_sub2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 9
  conflict_id  year gwno_a gwno_a_2nd gwno_b gwno_b_2nd incomp~1 inten~2 type_~3
        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;  
1       11342  2012    750         NA     NA         NA territo~       1 intras~
2       11342  2014    750         NA     NA         NA territo~       1 intras~
3       11343  1967    651         NA    666         NA territo~       2 inters~
4       11343  1969    651         NA    666         NA territo~       1 inters~
5       11343  1970    651         NA    666         NA territo~       1 inters~
6       11343  1973    651         NA    666         NA territo~       2 inters~
# ... with abbreviated variable names 1: incompatibility, 2: intensity_level,
#   3: type_of_conflict</code></pre>
</div>
</div>
</section>
<section id="explicitly-dropping-variables-with-select" class="level3">
<h3 class="anchored" data-anchor-id="explicitly-dropping-variables-with-select">Explicitly dropping variables with <code>select()</code></h3>
<p>Let’s say we are not really interested in the exact end date of an episode (where applicable). We can use the <code>select()</code> function to remove this variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>df_sub3 <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>      <span class="sc">-</span>ep_end_date</span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_sub3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 14
  confl~1  year gwno_a gwno_~2 gwno_b gwno_~3 incom~4 inten~5 type_~6 start_date
    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
1   11342  2012    750      NA     NA      NA territ~       1 intras~ 1997-05-29
2   11342  2014    750      NA     NA      NA territ~       1 intras~ 1997-05-29
3   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
4   11343  1969    651      NA    666      NA territ~       1 inters~ 1967-06-05
5   11343  1970    651      NA    666      NA territ~       1 inters~ 1967-06-05
6   11343  1973    651      NA    666      NA territ~       2 inters~ 1967-06-05
# ... with 4 more variables: start_prec &lt;dbl&gt;, start_date2 &lt;date&gt;,
#   start_prec2 &lt;dbl&gt;, ep_end &lt;dbl&gt;, and abbreviated variable names
#   1: conflict_id, 2: gwno_a_2nd, 3: gwno_b_2nd, 4: incompatibility,
#   5: intensity_level, 6: type_of_conflict</code></pre>
</div>
</div>
</section>
<section id="reordering-variables-with-select" class="level3">
<h3 class="anchored" data-anchor-id="reordering-variables-with-select">Reordering variables with <code>select()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>df_sub4 <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>    conflict_id, </span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>    year,</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>    gwno_a, </span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>    gwno_b,</span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>    type_of_conflict,</span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a>    intensity_level, </span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a>    incompatibility</span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_sub4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 7
  conflict_id  year gwno_a gwno_b type_of_conflict intensity_level incompatibi~1
        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;                      &lt;dbl&gt; &lt;chr&gt;        
1       11342  2012    750     NA intrastate                     1 territory    
2       11342  2014    750     NA intrastate                     1 territory    
3       11343  1967    651    666 interstate                     2 territory    
4       11343  1969    651    666 interstate                     1 territory    
5       11343  1970    651    666 interstate                     1 territory    
6       11343  1973    651    666 interstate                     2 territory    
# ... with abbreviated variable name 1: incompatibility</code></pre>
</div>
</div>
</section>
<section id="renaming-variables-with-select" class="level3">
<h3 class="anchored" data-anchor-id="renaming-variables-with-select">Renaming variables with <code>select()</code></h3>
<p>We can also use <code>select()</code> to rename variables. Below, we need to use the <code>everything()</code> function if we don’t want to drop the remaining variables in the process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "conflict_id"      "year"             "gwno_a"           "gwno_a_2nd"      
 [5] "gwno_b"           "gwno_b_2nd"       "incompatibility"  "intensity_level" 
 [9] "type_of_conflict" "start_date"       "start_prec"       "start_date2"     
[13] "start_prec2"      "ep_end"           "ep_end_date"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>df_rename <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="at">gwno_a_ext =</span> gwno_a_2nd,</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">gwno_b_ext =</span> gwno_b_2nd,</span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="helper-functions" class="level3">
<h3 class="anchored" data-anchor-id="helper-functions">Helper functions</h3>
<p><code>dplyr</code> has a number of helper functions — and that is where the magic lies. These can be used with either <code>select()</code> or <code>filter()</code>. Here are some useful functions:</p>
<ul>
<li><code>starts_with()</code></li>
<li><code>ends_with()</code></li>
<li><code>contains()</code></li>
<li><code>matches()</code>: More general than <code>contains()</code> because it allows for regular expressions. We won’t do an example here because regular expressions are a whole other beast…</li>
</ul>
<p>For example, let’s create a data frame with all variables that contain Gleditsch-Ward state codes “gwno”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a>df_gwno <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"gw"</span>))</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_gwno)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwno_a"     "gwno_a_2nd" "gwno_b"     "gwno_b_2nd"</code></pre>
</div>
</div>
<p>Ot we could select all variables that start with the letter “s”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>df_start_s <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"s"</span>))</span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_start_s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "start_date"  "start_prec"  "start_date2" "start_prec2"</code></pre>
</div>
</div>
</section>
</section>
<section id="introducting-filter" class="level2">
<h2 class="anchored" data-anchor-id="introducting-filter">Introducting <code>filter()</code></h2>
<p>While <code>select()</code> operates on columns, <code>filter()</code> operates on observations (rows). We always use <code>filter()</code> in combination with logical statements. First, let’s briefly review the most commonly used logical statements.</p>
<ul>
<li><code>x &lt; y</code></li>
<li><code>x &lt;= y</code></li>
<li><code>x == y</code></li>
<li><code>x != y</code></li>
<li><code>x &gt;= y</code></li>
<li><code>x &gt; y</code></li>
<li><code>x %in% c(a, b, c)</code> is <code>TRUE</code> if <code>x</code> is in the vector <code>c(a, b, c)</code>.</li>
</ul>
<p>There are two more important logical statements we frequently use in data wrangling. * <code>is.na()</code> * <code>!is.na()</code></p>
<p>First, let’s say we are only interested in intrastate conflicts. We can use <code>filter()</code> to find them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>df_intrastate <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type_of_conflict<span class="sc">==</span><span class="st">"intrastate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Most of the conflicts do not have a recorded episode end date, so the <code>ep_end_date</code> variable is <code>NA</code>. Lets check out how many cases we have in which the <code>ep_end_date</code> variable is <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(raw<span class="sc">$</span>ep_end_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
  670  3494 </code></pre>
</div>
</div>
<p>We can use filter to create a new data frame that only contains observations for which an endorsement actually happened using <code>is.na()</code> (or more specifically the negation <code>!is.na()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>df_end <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(ep_end_date))</span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_end)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 15
  confl~1  year gwno_a gwno_~2 gwno_b gwno_~3 incom~4 inten~5 type_~6 start_date
    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
1   11342  2012    750      NA     NA      NA territ~       1 intras~ 1997-05-29
2   11342  2014    750      NA     NA      NA territ~       1 intras~ 1997-05-29
3   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
4   11343  1970    651      NA    666      NA territ~       1 inters~ 1967-06-05
5   11343  1973    651      NA    666      NA territ~       2 inters~ 1967-06-05
6   11344  2011    625      NA     NA      NA territ~       1 intras~ 2011-05-01
# ... with 5 more variables: start_prec &lt;dbl&gt;, start_date2 &lt;date&gt;,
#   start_prec2 &lt;dbl&gt;, ep_end &lt;dbl&gt;, ep_end_date &lt;date&gt;, and abbreviated
#   variable names 1: conflict_id, 2: gwno_a_2nd, 3: gwno_b_2nd,
#   4: incompatibility, 5: intensity_level, 6: type_of_conflict</code></pre>
</div>
</div>
<section id="filtering-for-multiple-values-at-once" class="level3">
<h3 class="anchored" data-anchor-id="filtering-for-multiple-values-at-once">Filtering for multiple values at once</h3>
<p>Suppose, we wanted to filter all of intrastate and internationalized interstate (II) conflicts involving ASEAN states. Both types of conflicts are defined in the codebook <span class="citation" data-cites="pettersson2022ucdp">(<a href="#ref-pettersson2022ucdp" role="doc-biblioref">Therese Pettersson 2022</a>)</span> as follows:</p>
<ul>
<li><em>Intrastate</em>: side A is always a government; side B is always one or more rebel groups; there is no involvement of foreign governments with troops, i.e.&nbsp;there is no <code>side_a_2nd</code> or <code>side_b_2nd</code> coded</li>
<li><em>Internationalized Intrastate (II)</em>: side A is always a government; side B is always one or more rebel groups; there is involvement of foreign governments with troops, i.e.&nbsp;there is at least ONE <code>side_a_2nd</code> or <code>side_b_2nd</code> coded</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(raw<span class="sc">$</span>type_of_conflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
extrasystemic            II    interstate    intrastate 
          125          1865           324          1850 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>intrastate_all <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"intrastate"</span>, <span class="st">"II"</span>)</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>df_intrastate <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type_of_conflict <span class="sc">%in%</span> intrastate_all)</span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4164</code></pre>
</div>
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_intrastate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3715</code></pre>
</div>
</div>
<p>Suppose that, within this subset, we are only interested in looking at wars (conflicts with &gt;=1000 battle-related deaths):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>df_intrastate_war <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>    type_of_conflict <span class="sc">%in%</span> intrastate_all,</span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a>    intensity_level <span class="sc">==</span> <span class="dv">2</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_intrastate_war)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1323</code></pre>
</div>
</div>
</section>
</section>
<section id="introducting-mutate" class="level2">
<h2 class="anchored" data-anchor-id="introducting-mutate">Introducting <code>mutate()</code></h2>
<p>We can use the <code>mutate()</code> function to create new variables or change existing ones.</p>
<p>Suppose we want to create a recode the <code>intensity_level</code> variable so that “minor” conflicts (25-999 battle-related deaths) = 0 and “war” (&gt;= 1000 battle-related deaths) = 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(raw<span class="sc">$</span>intensity_level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   1    2 
2565 1599 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>df_rescaled <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intensity_rescaled =</span> intensity_level<span class="dv">-1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Exercise</strong> Quick question to check our understanding: What is the difference in the output of the following two lines of code?</p>
<p><code>mutate(gwno_a_ext = gwno_a_2nd)</code></p>
<p><code>select(gwno_a_ext = gwno_a_2nd)</code></p>
<p>Suppose I wanted to add a binary variable that is <code>1</code> for any intrastate conflicts (with and without foreign/international involvement), and <code>0</code>.</p>
<p>Here, we use the <code>ifelse()</code> function that is tremendously helpful in data wrangling exercises. The syntax of <code>ifelse()</code> is as follows:</p>
<p><code>ifelse(condition, value if TRUE, value if FALSE)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>df_recode1 <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intrastate =</span> <span class="fu">ifelse</span>(type_of_conflict <span class="sc">%in%</span> intrastate_all, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="recoding-variables-with-replace" class="level3">
<h3 class="anchored" data-anchor-id="recoding-variables-with-replace">Recoding variables with <code>replace()</code></h3>
<p>We can also use <code>mutate()</code> to recode variables. Instead of using the <code>ifelse()</code> function, we can use the <code>replace()</code> function inside <code>mutate()</code> to recode our <code>type_of_conflict</code> variable to concatenate the two different types of intrastate conflicts.</p>
<p>The syntax for <code>replace()</code> is similar to that of <code>ifelse()</code>:</p>
<p><code>mutate(variable = replace(variable, condition, value if TRUE))</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>df_recode <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">conflict_type_recode =</span> <span class="fu">replace</span>(type_of_conflict, type_of_conflict <span class="sc">%in%</span> intrastate_all, <span class="st">"intrastate"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="super-helper-case_when" class="level2">
<h2 class="anchored" data-anchor-id="super-helper-case_when">Super-helper <code>case_when()</code></h2>
<p>We can use the <code>case_when()</code> function to use complex logical queries to create new variables. Think of <code>case_when()</code> as a supercharged <code>ifelse()</code>. To get used to the syntax, let’s use it as an alternative to <code>ifelse()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>df_recode_alt <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">conflict_type_recode =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>    type_of_conflict <span class="sc">%in%</span> intrastate_all <span class="sc">~</span> <span class="dv">1</span>, <span class="co"># Read: If conflict is intrastate (with or without external support)</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>    T <span class="sc">~</span> <span class="dv">0</span> <span class="co">#Read: "In all other cases"</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also use <code>case_when()</code> to simultaneously re-group (i.e.&nbsp;simplify) the <code>type_of_conflict</code> variable, while adjusting the naming conventions of other categories. The code below demonstrates the utility of nesting multiple logical queries in one function.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(raw<span class="sc">$</span>type_of_conflict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
extrasystemic            II    interstate    intrastate 
          125          1865           324          1850 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>df_regroup <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">type_of_conflict_redux =</span> dplyr<span class="sc">::</span><span class="fu">case_when</span>(</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>    type_of_conflict <span class="sc">%in%</span> intrastate_all  <span class="sc">~</span> <span class="st">"Intrastate"</span>,</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>    type_of_conflict <span class="sc">==</span> <span class="st">"extrasystemic"</span> <span class="sc">~</span> <span class="st">"Extrasystemic"</span>, </span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>    type_of_conflict <span class="sc">==</span> <span class="st">"interstate"</span> <span class="sc">~</span> <span class="st">"Interstate"</span>,</span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a>    T <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_regroup<span class="sc">$</span>type_of_conflict_redux)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Extrasystemic    Interstate    Intrastate 
          125           324          3715 </code></pre>
</div>
</div>
</section>
<section id="putting-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="putting-it-all-together">Putting it all together</h2>
<p>Ok, it is super tedious to always create a new data frame. The power of piping is that we can chain multiple operations together. This makes our live easier and the code a lot easier to read. You can also use comments to remind yourself what you are doing and inform others.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>df_new <span class="ot">&lt;-</span> raw <span class="sc">|&gt;</span> </span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Renaming gwno_a_2nd and gwno_b_2nd variables</span></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecting remaining variables minus start_prec and start_prec2 variables</span></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">everything</span>(),</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">gwno_a_ext =</span> gwno_a_2nd,</span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">gwno_b_ext =</span> gwno_b_2nd,</span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a>                <span class="sc">-</span><span class="fu">c</span>(start_prec, start_prec2)) <span class="sc">|&gt;</span> </span>
<span id="cb234-9"><a href="#cb234-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb234-10"><a href="#cb234-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset for wars (intensity_level=2)</span></span>
<span id="cb234-11"><a href="#cb234-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(intensity_level <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb234-12"><a href="#cb234-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb234-13"><a href="#cb234-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Creating binary variable for interstate conflict</span></span>
<span id="cb234-14"><a href="#cb234-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intrastate =</span> <span class="fu">ifelse</span>(type_of_conflict <span class="sc">%in%</span> intrastate_all, <span class="dv">1</span>, <span class="dv">0</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="introducting-summarize" class="level2">
<h2 class="anchored" data-anchor-id="introducting-summarize">Introducting <code>summarize()</code></h2>
<p>One of the most powerful <code>dplyr</code> features is the <code>summarize()</code> function,<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> especially in combination with <code>group_by()</code>.</p>
<p>Let’s compute the average and total number of conflicts for each country in the UCDP ACD data, and identify the total number of conflicts that ended in the same year.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<p>We use the <code>n()</code> function to count total number of conflicts, and the <code>sum()</code> function to add up the number of same-year conflicts (coded as <code>1</code> if conflict ends in the same year as onset, <code>0</code> otherwise)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>by_country <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(by_country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 3
  gwno_a n_all_conflicts n_sameyear_conflicts
   &lt;dbl&gt;           &lt;int&gt;                &lt;dbl&gt;
1      2               9                    1
2     40               1                    1
3     92              10                    1
4     93               8                    1
5     94               1                    1
6    100              10                    0</code></pre>
</div>
</div>
<section id="grouping-by-more-than-one-variable" class="level3">
<h3 class="anchored" data-anchor-id="grouping-by-more-than-one-variable">Grouping by more than one variable</h3>
<p>Do the number of conflicts vary based on the main conflict issue (territorial, government, both)? Let’s find out! To do so, we can simply group the data by <code>gwno_a</code> (country) and <code>incompatibilty</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>by_c_i <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a, intrastate) <span class="sc">|&gt;</span> </span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'gwno_a'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<p>Hm, this is pretty hard to see. Let’s visualize it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>{<span class="fu">plot</span>(<span class="fu">density</span>(by_c_i<span class="sc">$</span>n_all_conflicts[by_c_i<span class="sc">$</span>intrastate <span class="sc">==</span> <span class="dv">1</span>]), <span class="at">col =</span> <span class="st">"blue"</span>)</span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(by_c_i<span class="sc">$</span>n_all_conflicts[by_c_i<span class="sc">$</span>intrastate <span class="sc">==</span> <span class="dv">0</span>]), <span class="at">col =</span> <span class="st">"red"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r-intro_files/figure-html/unnamed-chunk-204-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="quick-note-on-group_by-summarize-vs.-group_by-mutate" class="level3">
<h3 class="anchored" data-anchor-id="quick-note-on-group_by-summarize-vs.-group_by-mutate">Quick note on <code>group_by()</code> + <code>summarize()</code> vs.&nbsp;<code>group_by()</code> + <code>mutate()</code></h3>
<p>Above, we create grouped data summaries. Notice that only the variables we explicitly specify are retained when first grouping the data and then running <code>summarize()</code>.</p>
<p>Sometimes, we want to create grouped variables but retain the remainder of the dataframe. To do so, we can also use <code>group_by()</code> with <code>mutate()</code>. However, this is not appropriate in all situations. For example, if we created a <code>n_conflict</code> variable for each row in the UCDP ACD data, someone looking at our dataframe could interpret this as multiple conflicts attributed to each conflict ID.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>pleasedont <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sorting-with-arrange" class="level2">
<h2 class="anchored" data-anchor-id="sorting-with-arrange">Sorting with <code>arrange()</code></h2>
<p>To get an idea of where each candidate stands, let’s reorder the output using <code>arrange()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>by_country_arranged <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ordering output</span></span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(n_all_conflicts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, that wasn’t very informative. To re-order in descending order, use <code>-</code> before the variable you want the data frame to be ordered by or <code>desc()</code>. Let’s find out who is the candidate with the most average endorsement points</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>by_country_arranged1 <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ordering output</span></span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_all_conflicts))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="tie-breakers" class="level3">
<h3 class="anchored" data-anchor-id="tie-breakers">Tie breakers</h3>
<p>At the lower bound, a number of countries have the same number of armed conflicts. We can add a tie breaker by specifying more than one variable inside <code>arrange()</code>. It might already be ordered in this way, but sometimes it’s helpful to explicitly <em>make sure</em> that your data is ordered in the way that you want it to be ordered!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>by_country_arranged2 <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ordering output</span></span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_all_conflicts), <span class="fu">desc</span>(n_sameyear_conflicts))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="selecting-rows-using-slice" class="level3">
<h3 class="anchored" data-anchor-id="selecting-rows-using-slice">Selecting rows using <code>slice()</code></h3>
<p>Suppose, we only wanted to know who the top 10 countries are in terms of armed conflicts. We can use the <code>slice()</code> function for this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>by_country_top10 <span class="ot">&lt;-</span> df_new <span class="sc">|&gt;</span> </span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gwno_a) <span class="sc">|&gt;</span> </span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_all_conflicts =</span> <span class="fu">n</span>(),</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_sameyear_conflicts =</span> <span class="fu">sum</span>(ep_end)</span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ordering output</span></span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_all_conflicts), <span class="fu">desc</span>(n_sameyear_conflicts)) <span class="sc">|&gt;</span> </span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># only the top ten</span></span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="saving-files" class="level2">
<h2 class="anchored" data-anchor-id="saving-files">Saving files</h2>
<p>Finally, lets save the output of our code. This time, we would like to save it in the .dta format because, for some reason, we’d like to look at it in Stata. Let’s load the <code>foreign()</code> library before saving.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.dta</span>(df_new, <span class="st">"highest_conflicts.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Exercise</strong>: Which country (as indicated by the ID variable <code>gwno_a</code>) has the highest number of territorial conflicts, or those with <code>incompatibility</code> concerning the status of a “territory”?</p>
<p>We’ll find out which country corresponds with the <code>gwno_a</code> ID in the next unit!</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'gwno_a'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
</section>
</section>
<section id="merging-data" class="level1">
<h1>Merging data</h1>
<section id="the-data-1" class="level2">
<h2 class="anchored" data-anchor-id="the-data-1">The data</h2>
<p>For this exercise, we will be working with UCDP datasets from the <code>peacesciencer</code> package <span class="citation" data-cites="miller2022peacesciencer">(<a href="#ref-miller2022peacesciencer" role="doc-biblioref">Miller 2022</a>)</span>:</p>
<ul>
<li>Armed Conflict Dataset <span class="citation" data-cites="pettersson2019organized">(ACD, <a href="#ref-pettersson2019organized" role="doc-biblioref">Therése Pettersson, Högbladh, and Öberg 2019</a>)</span>, grouped by country</li>
<li>Onset Data <span class="citation" data-cites="gleditsch2002armed pettersson2019organized">(<a href="#ref-gleditsch2002armed" role="doc-biblioref">Gleditsch et al. 2002</a>; <a href="#ref-pettersson2019organized" role="doc-biblioref">Therése Pettersson, Högbladh, and Öberg 2019</a>)</span>: Country-year level data for armed conflict onsets</li>
</ul>
<p>To figure out which countries we’ve been looking at, we will also merge in a dataset with country-level information from the <code>states</code> package developed by <a href="https://www.andybeger.com/states/index.html">Andreas Beger</a>.</p>
<p>Let’s load the three datasets that we will be using, starting with the ACD data that we generated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>ucdp_acd <span class="ot">&lt;-</span> peacesciencer<span class="sc">::</span>ucdp_acd <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">gwcode =</span> gwno_a) <span class="co"># side A = country of interest</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>ucdp_onset <span class="ot">&lt;-</span> peacesciencer<span class="sc">::</span>ucdp_onsets</span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>states_gwno <span class="ot">&lt;-</span> states<span class="sc">::</span>gwstates</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-dplyr-for-merging" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyr-for-merging">Using <code>dplyr</code> for merging</h2>
<p>The <code>dplyr</code> package in <code>R</code> contains a number of functions that allow us to merge data.</p>
<p>Suppose, we have two data frames: <code>x</code> and <code>y</code>. The basic syntax for data merging with <code>dplyr</code> is the following:</p>
<p><code>output &lt;- whichjoin(x, y, by = "variable")</code></p>
<p>We will focus on the following four join functions:</p>
<ul>
<li><code>full_join()</code>: Join data from <code>x</code> and <code>y</code> upon retaining all rows and values. This is the maximum join possible. Neither <code>x</code> nor <code>y</code> is the “master”.</li>
<li><code>inner_join()</code>: Join only those rows that appear in both <code>x</code> and <code>y</code>. Neither <code>x</code> nor <code>y</code> is the “master”.</li>
<li><code>left_join()</code>: Join only those rows from <code>y</code> that appear in <code>x</code>, retaining all data in <code>x</code>. Here, <code>x</code> is the “master”.</li>
<li><code>right_join()</code>: Join only those rows from <code>x</code> that appear in <code>y</code>, retaining all data in <code>y</code>. Here, <code>y</code> is the “master”.</li>
</ul>
<section id="full_join" class="level3">
<h3 class="anchored" data-anchor-id="full_join"><code>full_join()</code></h3>
<p>Suppose we wanted to keep the maximum amount of data in our new merged data set. We would use the <code>full_join()</code> function to merge the grouped-by-country UCDP ACD data with the UCDP Onset data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_acd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "conflict_id"      "year"             "gwcode"           "gwno_a_2nd"      
 [5] "gwno_b"           "gwno_b_2nd"       "incompatibility"  "intensity_level" 
 [9] "type_of_conflict" "start_date"       "start_prec"       "start_date2"     
[13] "start_prec2"      "ep_end"           "ep_end_date"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_onset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwcode"     "year"       "sumnewconf" "sumonset1"  "sumonset2" 
[6] "sumonset3"  "sumonset5"  "sumonset10"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a>ucdp_full <span class="ot">&lt;-</span> <span class="fu">full_join</span>(ucdp_acd, ucdp_onset, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"gwcode"</span>, <span class="st">"year"</span>))</span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ucdp_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 21
  confl~1  year gwcode gwno_~2 gwno_b gwno_~3 incom~4 inten~5 type_~6 start_date
    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
1   11342  2012    750      NA     NA      NA territ~       1 intras~ 1997-05-29
2   11342  2014    750      NA     NA      NA territ~       1 intras~ 1997-05-29
3   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
4   11343  1969    651      NA    666      NA territ~       1 inters~ 1967-06-05
5   11343  1970    651      NA    666      NA territ~       1 inters~ 1967-06-05
6   11343  1973    651      NA    666      NA territ~       2 inters~ 1967-06-05
# ... with 11 more variables: start_prec &lt;dbl&gt;, start_date2 &lt;date&gt;,
#   start_prec2 &lt;dbl&gt;, ep_end &lt;dbl&gt;, ep_end_date &lt;date&gt;, sumnewconf &lt;dbl&gt;,
#   sumonset1 &lt;dbl&gt;, sumonset2 &lt;dbl&gt;, sumonset3 &lt;dbl&gt;, sumonset5 &lt;dbl&gt;,
#   sumonset10 &lt;dbl&gt;, and abbreviated variable names 1: conflict_id,
#   2: gwno_a_2nd, 3: gwno_b_2nd, 4: incompatibility, 5: intensity_level,
#   6: type_of_conflict</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ucdp_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12643</code></pre>
</div>
</div>
</section>
<section id="inner_join" class="level3">
<h3 class="anchored" data-anchor-id="inner_join"><code>inner_join()</code></h3>
<p>Suppose, instead of retaining as much data as possible, we only wanted to keep data for which we have <em>observations</em> in both data sets. Note that this merging is only done based on the variables that we specify to uniquely identify each observation. Please refer to the <em>Data Wrangling Cheat Sheet</em> for methods that will select based on matching values beyond the unique identifiers (see for example <code>intersect()</code> and <code>setdiff()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_acd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "conflict_id"      "year"             "gwcode"           "gwno_a_2nd"      
 [5] "gwno_b"           "gwno_b_2nd"       "incompatibility"  "intensity_level" 
 [9] "type_of_conflict" "start_date"       "start_prec"       "start_date2"     
[13] "start_prec2"      "ep_end"           "ep_end_date"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_onset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwcode"     "year"       "sumnewconf" "sumonset1"  "sumonset2" 
[6] "sumonset3"  "sumonset5"  "sumonset10"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a>ucdp_inner <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(ucdp_acd, ucdp_onset, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"gwcode"</span>, <span class="st">"year"</span>))</span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ucdp_inner)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 21
  confl~1  year gwcode gwno_~2 gwno_b gwno_~3 incom~4 inten~5 type_~6 start_date
    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
1   11342  2012    750      NA     NA      NA territ~       1 intras~ 1997-05-29
2   11342  2014    750      NA     NA      NA territ~       1 intras~ 1997-05-29
3   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
4   11343  1969    651      NA    666      NA territ~       1 inters~ 1967-06-05
5   11343  1970    651      NA    666      NA territ~       1 inters~ 1967-06-05
6   11343  1973    651      NA    666      NA territ~       2 inters~ 1967-06-05
# ... with 11 more variables: start_prec &lt;dbl&gt;, start_date2 &lt;date&gt;,
#   start_prec2 &lt;dbl&gt;, ep_end &lt;dbl&gt;, ep_end_date &lt;date&gt;, sumnewconf &lt;dbl&gt;,
#   sumonset1 &lt;dbl&gt;, sumonset2 &lt;dbl&gt;, sumonset3 &lt;dbl&gt;, sumonset5 &lt;dbl&gt;,
#   sumonset10 &lt;dbl&gt;, and abbreviated variable names 1: conflict_id,
#   2: gwno_a_2nd, 3: gwno_b_2nd, 4: incompatibility, 5: intensity_level,
#   6: type_of_conflict</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ucdp_inner) <span class="co"># compare this to the number of rows from our `full_join()` </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3777</code></pre>
</div>
</div>
</section>
<section id="left_join-and-right_join" class="level3">
<h3 class="anchored" data-anchor-id="left_join-and-right_join"><code>left_join()</code> and <code>right_join()</code></h3>
<p>Suppose we had an existing master data set and wanted to add data to this master without adding new rows—just new columns. This could for example be the case if we had a specific time frame that we wanted to study, and only want to merge data which matches the original data.</p>
<p>For the duration of the workshop, we have been working with the ACD data, without procuring information on which countries we were looking at. Let’s merge the grouped-by-country ACD data with the <code>gwstates</code> dataset on country information from the <code>states</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(ucdp_acd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "conflict_id"      "year"             "gwcode"           "gwno_a_2nd"      
 [5] "gwno_b"           "gwno_b_2nd"       "incompatibility"  "intensity_level" 
 [9] "type_of_conflict" "start_date"       "start_prec"       "start_date2"     
[13] "start_prec2"      "ep_end"           "ep_end_date"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(states_gwno)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gwcode"       "gwc"          "country_name" "start"        "end"         
[6] "microstate"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>merged_left <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ucdp_acd, states_gwno, <span class="at">by =</span> <span class="st">"gwcode"</span>)</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(merged_left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "conflict_id"      "year"             "gwcode"           "gwno_a_2nd"      
 [5] "gwno_b"           "gwno_b_2nd"       "incompatibility"  "intensity_level" 
 [9] "type_of_conflict" "start_date"       "start_prec"       "start_date2"     
[13] "start_prec2"      "ep_end"           "ep_end_date"      "gwc"             
[17] "country_name"     "start"            "end"              "microstate"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ucdp_acd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4164</code></pre>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(merged_left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5020</code></pre>
</div>
</div>
<p>Replacing <code>left_join()</code> with <code>right_join()</code> in the above example would merge the grouped-by-country data into the country-level dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>merged_right <span class="ot">&lt;-</span> <span class="fu">right_join</span>(ucdp_acd, states_gwno, <span class="at">by =</span> <span class="st">"gwcode"</span>)</span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(merged_right)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 20
  confl~1  year gwcode gwno_~2 gwno_b gwno_~3 incom~4 inten~5 type_~6 start_date
    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;date&gt;    
1   11342  2012    750      NA     NA      NA territ~       1 intras~ 1997-05-29
2   11342  2014    750      NA     NA      NA territ~       1 intras~ 1997-05-29
3   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
4   11343  1967    651      NA    666      NA territ~       2 inters~ 1967-06-05
5   11343  1969    651      NA    666      NA territ~       1 inters~ 1967-06-05
6   11343  1969    651      NA    666      NA territ~       1 inters~ 1967-06-05
# ... with 10 more variables: start_prec &lt;dbl&gt;, start_date2 &lt;date&gt;,
#   start_prec2 &lt;dbl&gt;, ep_end &lt;dbl&gt;, ep_end_date &lt;date&gt;, gwc &lt;chr&gt;,
#   country_name &lt;chr&gt;, start &lt;date&gt;, end &lt;date&gt;, microstate &lt;lgl&gt;, and
#   abbreviated variable names 1: conflict_id, 2: gwno_a_2nd, 3: gwno_b_2nd,
#   4: incompatibility, 5: intensity_level, 6: type_of_conflict</code></pre>
</div>
</div>
<p><strong>Exercise</strong>: Which country-year has the highest number of armed conflicts based on the data from <code>ucdp_acd</code> and <code>states_gwno</code>?</p>
<div class="cell">

</div>
</section>
</section>
</section>
<section id="bibliography" class="level1 unnumbered">


</section>


<div id="quarto-appendix"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-unit2020democracy" class="csl-entry" role="doc-biblioentry">
Economist Intelligence Unit. 2020. <span>“Democracy Index 2019. A Year of Democratic Setbacks and Popular Protest.”</span>
</div>
<div id="ref-gleditsch2002armed" class="csl-entry" role="doc-biblioentry">
Gleditsch, Nils Petter, Peter Wallensteen, Mikael Eriksson, Margareta Sollenberg, and Håvard Strand. 2002. <span>“Armed Conflict 1946-2001: A New Dataset.”</span> <em>Journal of Peace Research</em> 39 (5): 615–37.
</div>
<div id="ref-miller2022peacesciencer" class="csl-entry" role="doc-biblioentry">
Miller, Steven V. 2022. <span>“<span class="math inline">\(\{\)</span>Peacesciencer<span class="math inline">\(\}\)</span>: An r Package for Quantitative Peace Science Research.”</span> <em>Conflict Management and Peace Science</em> 39 (6): 755–79.
</div>
<div id="ref-pettersson2022ucdp" class="csl-entry" role="doc-biblioentry">
Pettersson, Therese. 2022. <span>“UCDP/PRIO Armed Conflict Dataset Codebook v 22.1.”</span> <em>Uppsala: Uppsala Conflict Data Program</em>.
</div>
<div id="ref-pettersson2019organized" class="csl-entry" role="doc-biblioentry">
Pettersson, Therése, Stina Högbladh, and Magnus Öberg. 2019. <span>“Organized Violence, 1989–2018 and Peace Agreements.”</span> <em>Journal of Peace Research</em> 56 (4): 589–603.
</div>
<div id="ref-raleigh2015armed" class="csl-entry" role="doc-biblioentry">
Raleigh, Clionadh, and Caitriona Dowd. 2015. <span>“Armed Conflict Location and Event Data Project (ACLED) Codebook.”</span>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Sometimes you have to do a work around, like switching to a character first, and then converting the character to numeric. You can concatenate commands: <code>myvar &lt;- as.numeric(as.character(myvar))</code>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://cran.r-project.org/web/packages/.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>ACLED uses the following definition: “A protest describes a non-violent, group public demonstration, often against a government institution. Rioting is a violent form of demonstration,” see <span class="citation" data-cites="raleigh2015armed">Raleigh and Dowd (<a href="#ref-raleigh2015armed" role="doc-biblioref">2015</a>)</span>.)<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>We will not be covering lubridate today<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Not the best example, but you get the point…<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Note that both the British and American English versions of <code>summarise()</code> and <code>summarize()</code> work!<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Note that if the <code>ep_end</code> variable had missing values, we would need to specify <code>na.rm = TRUE</code> within the <code>sum()</code> function.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>